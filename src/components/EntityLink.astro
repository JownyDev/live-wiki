---
import { Icon } from 'astro-icon/components';

export type EntityLinkProps = {
  label: string;
  href?: string;
  missing?: boolean;
  icon?: string;
  className?: string;
  iconClassName?: string;
};

const { label, href, missing = false, icon, className, iconClassName } =
  Astro.props as EntityLinkProps;
const isMissing = missing || !href;

const baseClasses = 'entity-link';
const missingClasses = 'entity-link--missing';
const resolvedClassName = `${baseClasses}${isMissing ? ` ${missingClasses}` : ''}${className ? ` ${className}` : ''}`;
const resolvedIconClassName = `entity-link__icon${iconClassName ? ` ${iconClassName}` : ''}`;
---

{isMissing ? (
  <span class={resolvedClassName} aria-disabled="true">
    {icon ? (
      <Icon name={`material-symbols:${icon}`} class={resolvedIconClassName} aria-hidden="true" />
    ) : null}
    <span class="entity-link__label">{label}</span>
  </span>
) : (
  <a class={resolvedClassName} href={href}>
    {icon ? (
      <Icon name={`material-symbols:${icon}`} class={resolvedIconClassName} aria-hidden="true" />
    ) : null}
    <span class="entity-link__label">{label}</span>
  </a>
)}
