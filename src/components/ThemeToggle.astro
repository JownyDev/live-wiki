---
import { getLangFromUrl, useTranslations } from "../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<button id="theme-toggle" type="button" class="theme-toggle" aria-label={t("ui.theme_toggle")}>
  <span class="material-symbols-outlined theme-toggle__icon theme-toggle__icon--light">
    light_mode
  </span>
  <span class="material-symbols-outlined theme-toggle__icon theme-toggle__icon--dark">
    dark_mode
  </span>
</button>

<script>
  const themeToggle = document.getElementById('theme-toggle');
  
  if (themeToggle) {
    themeToggle.addEventListener('click', () => {
      const isDark = !document.documentElement.classList.contains('light');
      const nextTheme = isDark ? 'light' : 'dark';
      
      document.documentElement.classList.toggle('light');
      localStorage.setItem('theme', nextTheme);
    });
  }
</script>