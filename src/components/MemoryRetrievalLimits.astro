---
import MemoryProfileCard from './MemoryProfileCard.astro';
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

type Props = {
  maxItems?: number | null;
  maxTokensSummary?: number | null;
};

const { maxItems = null, maxTokensSummary = null } = Astro.props as Props;
const hasItems = typeof maxItems === 'number';
const hasTokens = typeof maxTokensSummary === 'number';
const shouldRender = hasItems || hasTokens;
---

{shouldRender ? (
  <MemoryProfileCard 
    title={t('ui.memory_limits')} 
    icon="analytics"
    class="h-full"
    contentClass="flex-1 justify-center"
  >
    <div class="memory-limits">
      {hasItems ? (
        <div class="memory-limits__item">
          <span class="memory-limits__label">{t('ui.max_items')}:</span>
          <span class="memory-limits__value">{maxItems}</span>
        </div>
      ) : null}
      {hasTokens ? (
        <div class="memory-limits__item">
          <span class="memory-limits__label">{t('ui.max_tokens')}:</span>
          <span class="memory-limits__value">{maxTokensSummary}</span>
        </div>
      ) : null}
    </div>
  </MemoryProfileCard>
) : null}
