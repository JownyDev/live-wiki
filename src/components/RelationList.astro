---
import EntityLink from './EntityLink.astro';

export type RelationItem = {
  text: string;
  href?: string;
  missing?: boolean;
};

type Props = {
  label: string;
  items: RelationItem[];
  emptyText?: string;
};

const { label, items, emptyText } = Astro.props;
const hasItems = items.length > 0;
const shouldRender = hasItems || typeof emptyText === 'string';
---

{shouldRender ? (
  <div class="relation-list">
    <h2>{label}</h2>
    {hasItems ? (
      <ul>
        {items.map((item) => (
          <li>
            <EntityLink label={item.text} href={item.href} missing={item.missing} />
          </li>
        ))}
      </ul>
    ) : (
      <p class="relation-list__empty">{emptyText}</p>
    )}
  </div>
) : null}

<style>
  .relation-list__empty {
    opacity: 0.7;
  }
</style>
