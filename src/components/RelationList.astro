---
import EntityList, { type EntityListItem } from './EntityList.astro';

export type RelationItem = EntityListItem & {
  text: string;
};

type Props = {
  label: string;
  items: RelationItem[];
  emptyText?: string;
};

const { label, items, emptyText } = Astro.props;
const hasItems = items.length > 0;
const shouldRender = hasItems || typeof emptyText === 'string';

const normalizedItems = items.map(item => ({
  ...item,
  label: item.text
}));
---

{shouldRender ? (
  <div class="relation-list">
    <h3 class="text-xs font-bold uppercase tracking-[0.14em] text-accent mb-4">{label}</h3>
    {hasItems ? (
      <EntityList items={normalizedItems} />
    ) : (
      <p class="relation-list__empty">{emptyText}</p>
    )}
  </div>
) : null}
