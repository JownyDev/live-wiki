---
import { Icon } from 'astro-icon/components';
import Badge, { type BadgeVariant } from './Badge.astro';

type MetaItem = {
  label: string;
  value: string;
  variant?: BadgeVariant;
};

type Props = {
  title: string;
  meta?: MetaItem[];
  icon?: string;
};

const { title, meta = [], icon } = Astro.props as Props;
const hasMeta = meta.length > 0;
const hasActions = Astro.slots.has('actions');
---

<header class="page-header">
  <div class="page-header__title-row">
    <h1 class="page-header__title">
      {icon ? (
        <Icon name={`material-symbols:${icon}`} class="page-header__title-icon" aria-hidden="true" />
      ) : null}
      <span>{title}</span>
    </h1>
    {hasActions ? <div class="page-header__actions"><slot name="actions" /></div> : null}
  </div>
  {hasMeta ? (
    <dl class="page-header__meta">
      {meta.map((item) => (
        <div class="page-header__meta-item">
          <dt class="page-header__meta-label">{item.label}</dt>
          <dd class="page-header__meta-value">
            <Badge label={item.value} variant={item.variant} />
          </dd>
        </div>
      ))}
    </dl>
  ) : null}
</header>
