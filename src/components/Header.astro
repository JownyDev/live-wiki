---
import Badge, { type BadgeVariant } from './Badge.astro';

type MetaItem = {
  label: string;
  value: string;
  variant?: BadgeVariant;
};

type Props = {
  title: string;
  meta?: MetaItem[];
  icon?: string;
};

const { title, meta = [], icon } = Astro.props as Props;
const hasMeta = meta.length > 0;
const hasActions = Astro.slots.has('actions');
---

<header class="page-header">
  <div class="page-header__title-row">
    <h1 class="page-header__title">
      {icon ? (
        <span class="material-symbols-outlined page-header__title-icon" aria-hidden="true">
          {icon}
        </span>
      ) : null}
      <span>{title}</span>
    </h1>
    {hasActions ? <div class="page-header__actions"><slot name="actions" /></div> : null}
  </div>
  {hasMeta ? (
    <dl class="page-header__meta">
      {meta.map((item) => (
        <div class="page-header__meta-item">
          <dt class="page-header__meta-label">{item.label}</dt>
          <dd class="page-header__meta-value">
            <Badge label={item.value} variant={item.variant} />
          </dd>
        </div>
      ))}
    </dl>
  ) : null}
</header>

<style>
  .page-header {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    margin-bottom: var(--space-6);
  }

  .page-header__title-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
  }

  .page-header__title {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    margin: 0;
  }

  .page-header__title-icon {
    font-size: 1.35rem;
    color: var(--color-accent);
  }

  .page-header__meta {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem 0.75rem;
    margin: 0;
  }

  .page-header__meta-item {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    margin: 0;
  }

  .page-header__meta-label {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.03em;
    color: var(--color-muted);
  }

  .page-header__meta-value {
    margin: 0;
  }

  .page-header__actions {
    display: inline-flex;
    gap: 0.5rem;
  }
</style>
