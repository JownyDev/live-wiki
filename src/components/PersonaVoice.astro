---
import PersonaCard from './PersonaCard.astro';
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

type Props = {
  tone?: string | null;
  styleNotes?: string[];
};

const { tone = null, styleNotes = [] } = Astro.props as Props;
const hasTone = Boolean(tone);
const hasStyleNotes = styleNotes.length > 0;
const shouldRender = hasTone || hasStyleNotes;
---

{shouldRender ? (
  <PersonaCard title={t("ui.voice")} span="wide" icon="record-voice-over">
    <div class="persona-voice">
      {hasTone ? (
        <div class="persona-voice__block">
          <p class="persona-voice__label">{t('ui.tone')}</p>
          <p class="persona-voice__tone">{tone}</p>
        </div>
      ) : null}
      {hasStyleNotes ? (
        <div class="persona-voice__block">
          <p class="persona-voice__label">{t('ui.style_notes')}</p>
          <ul class="persona-voice__notes">
            {styleNotes.map((note) => (
              <li>{note}</li>
            ))}
          </ul>
        </div>
      ) : null}
    </div>
  </PersonaCard>
) : null}
