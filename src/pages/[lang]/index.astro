---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/Header.astro';
import HomeNavigation from '../../components/HomeNavigation.astro';
import { languages } from '../../i18n/ui';
import { useTranslations } from '../../i18n/utils';
import { getRelativeLocaleUrl } from 'astro:i18n';

export function getStaticPaths() {
  return Object.keys(languages).map((lang) => ({ params: { lang } }));
}

const { lang } = Astro.params;
const t = useTranslations(lang as any);

const title = 'Live-Wiki';

const entities = [
  'characters',
  'planets',
  'events',
  'places',
  'elements',
  'cards',
  'mechanics',
  'objects',
] as const;

const navItems = entities.map((entity) => ({
  href: getRelativeLocaleUrl(lang as string, entity),
  title: t(`nav.${entity}` as any),
  description: t(`desc.${entity}` as any),
}));
---

<BaseLayout title={title} lang={lang as any}>
  <div class="space-y-8">
    <div class="space-y-4">
      <Header title={title} icon="auto-stories" />
      <p class="text-lg text-muted max-w-2xl">
        {t('site.tagline')}
      </p>
    </div>

    <HomeNavigation items={navItems} />
  </div>
</BaseLayout>
