---
import Header from '../../components/Header.astro';
import MarkdownDescription from '../../components/MarkdownDescription.astro';
import Section from '../../components/Section.astro';
import { getElementById, listElements } from '../../lib/content/elements';

export async function getStaticPaths() {
  const elements = await listElements();
  return elements.map((element) => ({
    params: { id: element.id },
  }));
}

const id = Astro.params.id;
const element = typeof id === 'string' ? await getElementById(id) : null;
const title = element ? element.name : 'Elemento no encontrado';
---

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>{title}</title>
  </head>
  <body>
    <main>
      {element ? (
        <>
          <Header title={element.name} />
          <MarkdownDescription content={element.body} />
        </>
      ) : (
        <>
          <Header title="Elemento no encontrado" />
          <Section>
            <p>El elemento solicitado no existe.</p>
            <p>
              <a href="/elements">Volver a elementos</a>
            </p>
          </Section>
        </>
      )}
    </main>
  </body>
</html>
