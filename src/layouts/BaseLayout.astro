---
import '../styles/global.css';
import PrimaryNav from '../components/PrimaryNav.astro';
import SearchIsland from '../components/SearchIsland.astro';

type Props = {
  title: string;
  lang?: string;
  pageClass?: string;
};

const { title, lang = 'es', pageClass } = Astro.props as Props;
const layoutClass = pageClass ? `layout ${pageClass}` : 'layout';
---

<!doctype html>
<html lang={lang}>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>{title}</title>
  </head>
  <body>
    <a class="skip-link" href="#content">Saltar al contenido</a>
    <div class={layoutClass}>
      <header class="layout__header">
        <div class="layout__brand">
          <a href="/">Live-Wiki</a>
        </div>
        <PrimaryNav />
        <SearchIsland />
      </header>
      <main id="content" class="layout__main">
        <slot />
      </main>
    </div>
  </body>
</html>

<style>
  .skip-link {
    position: absolute;
    left: -999px;
    top: 1rem;
    padding: 0.5rem 0.75rem;
    border-radius: var(--radius-pill);
    background: var(--color-surface);
    color: var(--color-text);
    text-decoration: none;
    box-shadow: 0 0 0 2px var(--color-border);
    z-index: 10;
  }

  .skip-link:focus {
    left: 1rem;
  }

  .layout {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    gap: var(--space-5);
    padding: var(--space-5);
  }

  .layout__header {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
    width: 100%;
    max-width: var(--max-width);
    margin: 0 auto;
  }

  .layout__brand a {
    font-size: 1.1rem;
    font-weight: 700;
    letter-spacing: 0.03em;
    text-decoration: none;
    color: inherit;
  }

  .layout__main {
    width: 100%;
    max-width: var(--max-width);
    margin: 0 auto;
  }

  @media (min-width: 900px) {
    .layout {
      padding: var(--space-6) var(--space-7);
    }
  }
</style>
